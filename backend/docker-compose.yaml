services:
  node:
    build:
      context: './backend'
      dockerfile: Dockerfile
    image: henriqueannicchino/node
    container_name: node_inventory_manager
    networks:
      - nodenet
    volumes:
      - './backend:/app'
      - /app/node_modules
    tty: true # what does this do?
    # ports:
    #   - "5000:5000"
# se removermos as portas, s√≥ vamos acessar ele via nginx localhost:8080/api
  react:
    build:
      context: './frontend'
      dockerfile: Dockerfile
    image: henriqueannicchino/react
    container_name: react_inventory_manager
    networks:
      - nodenet
    volumes:
      - './frontend:/app'
      - /app/node_modules
    tty: true # what does this do?
    ports:
      - "5173:5173"

  nginx:
    build:
      context: './nginx'
      dockerfile: Dockerfile
    image: henriqueannicchino/nginx
    container_name: nginx_inventory_manager
    networks:
      - nodenet
    ports:
      - "8080:80"

networks:
  nodenet:
    driver: bridge
